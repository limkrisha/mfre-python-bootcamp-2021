<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>MFRE Data Analytics Workshop Series</title>
    <meta charset="utf-8" />
    <meta name="author" content="Krisha Lim" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <link href="libs/remark-css/metropolis.css" rel="stylesheet" />
    <link href="libs/remark-css/metropolis-fonts.css" rel="stylesheet" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# MFRE Data Analytics Workshop Series
## Workshop 3: Python I
### Krisha Lim
### University of British Columbia | Master of Food and Resource Economics November 8, 2021

---


&lt;style type="text/css"&gt;
# CSS for including pauses in printed PDF output (see bottom of lecture)
@media print {
  .has-continuation {
    display: block !important;
  }
}
&lt;/style&gt;




# Workshop preparation

☑ Make sure you have a Gmail account 

☑ Upload and open the `Workshop3_Student.ipynb` file in Google Colab

---

# Overview

**Python I**

  - Google Colab
  - Variable Types - String, Integer, Float, Boolean
  - Lists, Dictionaries, Functions
  
**Python II**

  - Importing libraries in Python
  - Importing files to Google Colab 
  - Working with data and Python packages

---

# Learning Outcomes

- Explain the value of learning Python
- Demonstrate how to work with Google Colab 
- Define lists and dictionaries as it relates to Python
- Access and manipulate data in lists and dictionaries 

---
class: inverse, center, middle
name: motivation

# Motivation

&lt;html&gt;&lt;div style='float:left'&gt;&lt;/div&gt;&lt;hr color='#EB811B' size=1px width=796px&gt;&lt;/html&gt;

---
# Why Python?

- Free
- Open-source
- Has a large community
- Rich ecosystem of third-party packages
- Widely used in industry and academia

---
# Python and R

.pull-left[
**Python**
- General-purpose, object oriented programming
- Can more easily import SQL tables and other data from web
- Well suited for machine learning at scale and integration with web applications

]

.pull-right[
**R**
- Optimized for statistical analysis and data visualization
- Rich libraries for data cleaning, creating visualizations, training and evaluating machine learning and deep learning algorithms
- Strength of MFRE professors and team
]



.footnote[
[1] [IBM](https://www.ibm.com/cloud/blog/python-vs-r)
]

---

# Python and R

.center2[
&gt;  Increasingly, the question isn’t which to choose, but how to make the best use of both programming languages for your specific use cases.

&gt; &lt;footer&gt;--- IBM&lt;/footer&gt;

]

---

# Why learn one more language? 

&lt;img src="pics/tweet_nick.png" width="70%" style="display: block; margin: auto;" /&gt;

---

# Why learn one more language?

&lt;img src="pics/apps.jpg" width="85%" style="display: block; margin: auto;" /&gt;

---

# Why learn one more language?

- Advanced Excel skills
  - Consultant in Food &amp; Beverage/Agriculture (MNP Consulting)
  - Demand Planner (Semios)
  - Data Research Analyst (Tridge)
  
- Python or R (+ SQL)
  - Data Analyst (Earls Kitchen + Bar, Telus Agriculture)
  - Fleet Analyst (BC Transit)
  - Data Solutions Specialist (BC Public Service)
  - Grocery Data Domain Program Lead (Sobeys)
  - Research Associate (Ocean Wise)

- Tableau or Power BI (or other BI tools)
  - Data Visualization Specialist &amp; Tableau Administrator (BC Centre for Disease Control)
  - Business Analyst (Telus Health - Agribusiness Enablement &amp; Strategy)
  - Financial Analyst (SPUD.ca)

---
class: inverse, center, middle
name: get_started

# Python I

&lt;html&gt;&lt;div style='float:left'&gt;&lt;/div&gt;&lt;hr color='#EB811B' size=1px width=796px&gt;&lt;/html&gt;

---
# Google Colab

For this workshop and the Analytics course next semester, we will use [Google Colab](https://colab.research.google.com/). 

  - All you need is a working Gmail account
  - No need to install any software 
  - Works on Windows and MacOS
  - Can easily share codes with colleagues

Keyboard shortcuts
  - `Ctrl + Enter` to run
  - `Ctrl + M + B` to insert code chunk
  - `Ctrl + /` to comment out a code chunk (+ `Cmd` for Mac)
  
---
# Participation

You are expected to fill in the Google Colab file. 

At the end of the workshop, share this file to my UBC email.

**Share -&gt; Change from "Restricted" to "Anyone with the link" -&gt; Share with my UBC email**

---
# Try it out


```python
2 + 2
```

```
## 4
```

```python
print("Hello World")
```

```
## Hello World
```

---
# Strings, integers, and floats

In Python, the assignment operator is `=`. 

To review the value of a variable, we can type the name of the variable into the interpreter and press Enter/Return. 

However, to display output in a script, we have to use the `print` function. 


```python
text = "Data Carpentry"
number = 42
pi_value = 3.1415

text
```

```
## 'Data Carpentry'
```

```python
print(number)
```

```
## 42
```


---
# Strings, integers, and floats

Everything in Python has a type. To get the type of something, we can pass it to the built-in function `type`

  - **Strings** hold sequences of characters, which can be letters, numbers, punctuation, etc.
  - **Integers** are positive or negaitve whole numbers with no decimal points
  - **Floats** are real numbers and can be written with a decimal point


```python
type(text)
```

```
## &lt;class 'str'&gt;
```


```python
type(number)
```

```
## &lt;class 'int'&gt;
```


```python
type(pi_value)
```

```
## &lt;class 'float'&gt;
```

---
# Operators

We can perform mathematical calculations in Python using basic operators `+, -, /, *, %`


```python
2 + 2 # Addition
```

```
## 4
```

```python
6 * 7 # Multiplication
```

```
## 42
```

```python
2 ** 16 # Power
```

```
## 65536
```

```python
13 % 5 # Modulo
```

```
## 3
```

---

# Logic Operators

We can also use comparison and logic operators: `&lt;, &gt;, ==, !=, &lt;=, &gt;=` and statements of identity such as `and, or, not`. The data type returned is called **boolean**.


```python
3 &gt; 4 
```

```
## False
```

```python
True and True
```

```
## True
```

```python
True or False
```

```
## True
```

```python
True and False
```

```
## False
```

---
# Lists

**Lists** are the most fundamental data structure in Python. It is used to hold an ordered sequence of elements.

We build a list using **square brackets**.


```python
country = ["canada", "usa", "china", "japan"]
gdp = [44100, 55700, 16200, 39300]
carbon = [15.3, 16.6, 7.06, 9.14]

country
```

```
## ['canada', 'usa', 'china', 'japan']
```

```python
type(country)
```

```
## &lt;class 'list'&gt;
```

```python
len(country)
```

```
## 4
```

---
# Lists

Lists can also contain different data types. Lists can also contain lists. 


```python
example1 = ["canada", 15.3, "usa", 16.6, "china", 7.06, "japan", 9.14]

example2 = [["canada", 15.3],
            ["usa", 16.6],
            ["china", 7.06],
            ["japan", 9.14]]
            
print(example1)
```

```
## ['canada', 15.3, 'usa', 16.6, 'china', 7.06, 'japan', 9.14]
```

```python
print(example2)
```

```
## [['canada', 15.3], ['usa', 16.6], ['china', 7.06], ['japan', 9.14]]
```

```python
print("length of example2:", len(example2))
```

```
## length of example2: 4
```

---
# Lists

Each element in a list can be accessed by an index. **Note that Python indexes start with 0 instead of 1.**


```python
example1 = ["canada", 15.3, "usa", 16.6, "china", 7.06, "japan", 9.14]

example2 = [["canada", 15.3],
            ["usa", 16.6],
            ["china", 7.06],
            ["japan", 9.14]]
            
print("China's carbon emissions is", example1[5])
```

```
## China's carbon emissions is 7.06
```

```python
print("Japan's carbon emissions is", example2[3][1])
```

```
## Japan's carbon emissions is 9.14
```

---
# Lists

We can also slice lists, or select multiple elements from a list. In general, where it starts is included, where it ends is excluded, i.e., `[start_index:end_index]`. 


```python
example1 = ["canada", 15.3, "usa", 16.6, "china", 7.06, "japan", 9.14]

print(example1[2:6])
```

```
## ['usa', 16.6, 'china', 7.06]
```

```python
print(example1[:4])
```

```
## ['canada', 15.3, 'usa', 16.6]
```

```python
print(example1[4:])
```

```
## ['china', 7.06, 'japan', 9.14]
```

How do you print China's and Japan's emission only using data from `example2`?

---
# Lists

To print the index of a certain value in a list, we can use the `.index` function


```python
print("The index of 7.06 is", example1.index(7.06))
```

```
## The index of 7.06 is 5
```

---
# Lists

We can also change the value of the elements in a list. For example, we can change the value of Canada's emission from 15.3 to 16.3.


```python
example1 = ["canada", 15.3, "usa", 16.6, "china", 7.06, "japan", 9.14]

example1[1] = 16.3

print(example1)
```

```
## ['canada', 16.3, 'usa', 16.6, 'china', 7.06, 'japan', 9.14]
```

---
# Lists

If we want to replace the values in Canada's entries with South Korea's emissions:


```python
example1 = ["canada", 15.3, "usa", 16.6, "china", 7.06, "japan", 9.14]

example1[0:2] = ["south korea", 12.9]

print(example1)
```

```
## ['south korea', 12.9, 'usa', 16.6, 'china', 7.06, 'japan', 9.14]
```

---
# Lists

If we want to add Canada to the list again:


```python
example1_can = example1 + ["canada", 15.3]

print(example1_can)
```

```
## ['south korea', 12.9, 'usa', 16.6, 'china', 7.06, 'japan', 9.14, 'canada', 15.3]
```

---
# Lists

We can delete elements using the `del` function. For example, we can delete South Korea from our list.


```python
example1_can_append = ["south korea", 12.9, "usa", 16.6,
                      "china", 7.06, "japan", 9.14, "canada", 15.3]

del(example1_can_append[0:2])
print(example1_can_append)
```

```
## ['usa', 16.6, 'china', 7.06, 'japan', 9.14, 'canada', 15.3]
```

---
# Lists

We can also take the sum of elements in a list using the `sum` function.


```python
carbon = [15.3, 16.6, 7.06, 9.14]

print(sum(carbon))
```

```
## 48.1
```

---
# Lists

We can use a `for` loop to access the elements in a list one at a time:


```python
carbon = [15.3, 16.6, 7.06, 9.14]

for emissions in carbon:
  print(emissions)
```

```
## 15.3
## 16.6
## 7.06
## 9.14
```

---
# Dictionaries

Another important data type is called the **dictionary**. It is a container that holds pairs of objects - keys and values. 

Let's say you want to track the carbon emissions of each of these four countries. 


```python
country = ['canada', 'usa', 'china', 'japan']
carbon = [15.3, 16.6, 7.06, 9.14]

usa_index = country.index('usa')
print(usa_index)
```

```
## 1
```

```python
print('usa emissions: ', carbon[usa_index])
```

```
## usa emissions:  16.6
```

---
# Dictionaries

This method, however, can be time consuming especially if you have a very big dictionary.

Dictionaries allow us to connect each country directly to its emissions. 

To create a dictionary, we use **curly brackets**. 

Inside these curly brackets are a bunch of **key:value** pairs, where keys are countries and values are carbon emissions. 

---
# Dictionaries

Dictionaries work a lot like lists, except that you index them with **keys** instead of an index number.

To access a value of a given key, simply type in `data['key']`.


```python
emissions = {
  'canada': 15.3, 
  'usa':16.6,
  'china':7.06,
  'japan':9.14
}

emissions['china']
```

```
## 7.06
```

---
# Dictionaries

For the lookup to work properly, keys in the dictionary must be unique. 

In this example, the last key:value pair for China was stored in the dictionary. 


```python
emissions = {
  'canada': 15.3, 
  'usa':16.6,
  'china':7.06,
  'japan':9.14,
  'china':15
}


print(emissions)
```

```
## {'canada': 15.3, 'usa': 16.6, 'china': 15, 'japan': 9.14}
```

---
# Dictionaries

To add an item to a dictionary, we assign a value to a new key.


```python
emissions['south korea'] = 12.9

print(emissions)
```

```
## {'canada': 15.3, 'usa': 16.6, 'china': 15, 'japan': 9.14, 'south korea': 12.9}
```

We can also update the value of an existing key


```python
emissions['south korea'] = 15

print(emissions)
```

```
## {'canada': 15.3, 'usa': 16.6, 'china': 15, 'japan': 9.14, 'south korea': 15}
```

We use the `del` function to delete a key:value pair.


```python
del(emissions['south korea'])

print(emissions)
```

```
## {'canada': 15.3, 'usa': 16.6, 'china': 15, 'japan': 9.14}
```
---
# Dictionaries

Dictionaries can contain key:value pairs where the values are again dictionaries, just like lists can also contain lists. 

In this example, the keys are still country names, but the values are GDP and carbon emissions.


```python
data = {
  'canada': {'gdp':44100,
            'carbon':15.3},
  'usa': {'gdp':55700,
          'carbon':16.6}
}

# To print Canada's emissions
print(data['canada']['carbon'])
```

```
## 15.3
```
]

---
# Dictionaries

To add China's GDP and emissions to the `data` dictionary we just created


```python
data = {
  'canada': {'gdp':44100,
            'carbon':15.3},
  'usa': {'gdp':55700,
          'carbon':16.6}
}

china_data = {'gdp':16200, 'carbon':7.06}

#Add China to data
data['china'] = china_data
```

---
# Dictionaries

Using `for` loops with dictionaries is a little more complicated. 

1) Method 1


```python
data = {'canada': {'gdp': 44100, 'carbon': 15.3}, 
        'usa': {'gdp': 55700, 'carbon': 16.6}, 
        'china': {'gdp': 16200, 'carbon': 7.06}}

for key, value in data.items():
  print(key, "-&gt;", value)
```

```
## canada -&gt; {'gdp': 44100, 'carbon': 15.3}
## usa -&gt; {'gdp': 55700, 'carbon': 16.6}
## china -&gt; {'gdp': 16200, 'carbon': 7.06}
```

---
# Dictionaries

2) Method 2


```python
data = {'canada': {'gdp': 44100, 'carbon': 15.3}, 
        'usa': {'gdp': 55700, 'carbon': 16.6}, 
        'china': {'gdp': 16200, 'carbon': 7.06}}
      
for key in data.keys():
  print(key, "-&gt;", data[key])
```

```
## canada -&gt; {'gdp': 44100, 'carbon': 15.3}
## usa -&gt; {'gdp': 55700, 'carbon': 16.6}
## china -&gt; {'gdp': 16200, 'carbon': 7.06}
```

---
# Functions

A **function** is a code chunk that runs when is called. You can pass inputs called **parameters** or **arguments** into a function and get a result back. 

Defining a section of code as a function in Python is done using the `def` keyword. 

---
# Functions 

In the example below, we have a function called `my_function` that takes one argument `fname`. When `my_function` is called, we pass along a first name, which is used inside the function to print the student name. 


```python
def my_function(fname):
  print("Hello " + fname + ". Welcome to class today!")
  
my_function("Krisha")
```

```
## Hello Krisha. Welcome to class today!
```

```python
my_function("Janelle")
```

```
## Hello Janelle. Welcome to class today!
```

.footnote[
[1] [W3 Schools Tutorial](https://www.w3schools.com/python/python_functions.asp) 
]

---
# Functions

By default, a function must be called with the correct number of arguments. Meaning, if your function expects 2 arguments, you have to call the function with 2 arguments, not more and not less.


```python
def my_function(fname, lname):
  print("Hello " + fname + " " + lname + "!")
  
my_function("Krisha", "Lim")
```

```
## Hello Krisha Lim!
```

Try running this code. What do you get?


```python
my_function("Janelle")
```

.footnote[
[1] [W3 Schools Tutorial](https://www.w3schools.com/python/python_functions.asp) 
]

---
# Functions

Here is an example of a function named `add_function` that takes two arguments and returns their sum:


```python
def add_function(a, b):
  result = a + b
  print(result)

add_function(20, 22)
```

```
## 42
```

.footnote[
[1] [W3 Schools Tutorial](https://www.w3schools.com/python/python_functions.asp) 
]

---
# Case Study

Kim has been asked to use Python to analyze the following dataset. 

&lt;img src="pics/casestudy.png" width="70%" style="display: block; margin: auto;" /&gt;

Specifically, her tasks are:
- Create one or more Python "dictionaries" for all data in the above table (Hint: You can use nested dictionaries for fruits and quantity/rejected, and use lists to hold the values)
- Print fruit dictionary
- Print the sum of all "Orange" Total Quantity and sum of all "Orange" Quantity Rejected
- Calculate and print the rejection rate
- Calculate and print the maximum of "Orange" Total Quantity (Hint: use `max()` function)

---
  # Case Study - Suggested Solutions
  
  - Create fruit dictionary


```python
fruit = {'oranges': {'quantity': [3000, 6000, 12000],
  'rejected': [1400, 3500, 6700]},
  'bananas': {'quantity': [500, 3000, 15000],
    'rejected': [700, 1750, 3350]}}
```

- Print fruit dictionary


```python
print(fruit)              
```

---
  # Case Study - Suggested Solutions
  
  - Print the sum of all "Orange" Total Quantity and sum of all "Orange" Quantity Rejected


```python
print("Quantity = ", sum(fruit['oranges']['quantity']))
```

```
## Quantity =  21000
```

```python
print("Rejected = ", sum(fruit['oranges']['rejected']))
```

```
## Rejected =  11600
```

---
  # Case Study - Suggested Solutions
  
  - Calculate and print the rejection rate


```python
orange_totalqty = sum(fruit['oranges']['quantity'])
orange_totalrej = sum(fruit['oranges']['rejected'])
orange_rejrate = orange_totalrej / orange_totalqty

# use round() to round to 2 decimal places only
print("Orange rejection rate = ", round(orange_rejrate, 2))
```

```
## Orange rejection rate =  0.55
```

---
  # Case Study - Suggested Solutions
  
  - Calculate and print the maximum of "Orange" Total Quantity (Hint: use `max()` function)


```python
fruit = {'oranges': {'quantity': [3000, 6000, 12000],
  'rejected': [1400, 3500, 6700]},
  'bananas': {'quantity': [500, 3000, 15000],
    'rejected': [700, 1750, 3350]}}

print("Orange max qty =", max(fruit['oranges']['quantity']))
```

```
## Orange max qty = 12000
```


---
# Reminder

- Share your Colab file to my UBC email.

**Share -&gt; Change from "Restricted" to "Anyone with the link" -&gt; Share with my UBC email**


---
# Recap

- Explain the value of learning Python
- Demonstrate how to work with Google Colab 
- Define lists and dictionaries as it relates to Python
- Access and manipulate data in lists and dictionaries 

---
# Python II

- Next Monday, November 15
- Topics:

  - Importing libraries in Python
  - Importing files to Google Colab 
  - Working with data and Python packages
  
---
# References

- [Data Analysis and Visualization in Python for Ecologists](https://datacarpentry.org/python-ecology-lesson/00-before-we-start/index.html) by Data Carpentry





    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"highlightSpans": false,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
